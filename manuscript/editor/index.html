<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Science changed forever</title>
    <link rel="stylesheet" href="http://localhost:8080/style.css">
    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
<main>
<h1>Manuscript editor</h1>
    <p><button id="create-manuscript">Create new manuscript</button></p>
    <p><a id="new-manuscript"></a></p>
</main>
<aside>

</aside>
</body>
<script>
    const button = document.getElementById('create-manuscript')

    button.addEventListener('click', () => {
        return fetch('/manuscripts', {method: 'POST'})
                .then(res => res.headers.get('location'))
                .then(setNewManuscriptLink)
    })

    function setNewManuscriptLink (location) {
        const link = document.getElementById('new-manuscript')
        link.setAttribute('href', location + "?version=1")
        link.textContent = 'New manuscript created at ' + location
    }
</script>
</html>